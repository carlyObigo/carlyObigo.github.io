<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Sample</title>
<style>
iframe {display:block;}
iframe.invisible {display:none;}
</style>
</head>
<body>
    <button id="buttonA">버튼 A</button>
    <button id="buttonB">버튼 B</button>
    <script>
        document.getElementById('buttonA').addEventListener('click', function() {
            createIframe('./A.html', 'iframeA');
        });

        document.getElementById('buttonB').addEventListener('click', function() {
            createIframe('./B.html', 'iframeB');
        });

        function createIframe(src, id) {
			var ifr = document.getElementById(id);			
			history.pushState({page: id}, "");
			if (ifr) {
				console.log('createIframe return: already exist iframe:', ifr);
				if (id === 'iframeB' && ifr.classList.contains('invisible')) {
					ifr.classList.toggle('invisible');
				}
				return;
			}
            var iframe = document.createElement('iframe');
			iframe.id = id;
            iframe.src = src;
            document.body.appendChild(iframe);
        }
		window.addEventListener('popstate', function(evt) {
			console.log(evt);
			var ifrA = document.getElementById('iframeA');
			if (ifrA) {
				ifrA.remove();
				console.log('remove A', ifrA);
			}			
			var ifrB = document.getElementById('iframeB');
			if (ifrB) {
				ifrB.classList.toggle('invisible');
			}
		})
    </script>
</body>
</html>
